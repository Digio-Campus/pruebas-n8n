{
    "createdAt":  "2025-07-22T11:02:33.901Z",
    "updatedAt":  "2025-07-23T09:53:47.000Z",
    "id":  "K9voPcHS8okToUne",
    "name":  "Prueba nodo personalizado",
    "active":  false,
    "isArchived":  false,
    "nodes":  [
                  {
                      "parameters":  {
                                         "operation":  "get",
                                         "messageId":  "={{ $json.id }}",
                                         "simple":  false,
                                         "options":  {
                                                         "dataPropertyAttachmentsPrefixName":  "attachment_",
                                                         "downloadAttachments":  true
                                                     }
                                     },
                      "type":  "n8n-nodes-base.gmail",
                      "typeVersion":  2.1,
                      "position":  [
                                       96,
                                       32
                                   ],
                      "id":  "e074f184-7c44-4590-8eff-35c395efba48",
                      "name":  "Get a message",
                      "webhookId":  "eee13013-3cee-4aa9-82e2-9016516068b4",
                      "credentials":  {
                                          "gmailOAuth2":  {
                                                              "id":  "zFi2O2ftsD72oE41",
                                                              "name":  "Gmail account"
                                                          }
                                      }
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// https://community.n8n.io/t/iterating-over-email-attachments/13588/3\nlet results = [];\n\nfor (const item of $input.all()) {\n  console.log(item);\n  for (const key of Object.keys(item.binary)) {\n    results.push({\n        json: {fileName : item.binary[key].fileName },\n        binary: {\n            data: item.binary[key],\n        }\n    });\n  }\n}\n\nreturn results;"
                                     },
                      "id":  "cbd6fb0e-963f-479a-ab8d-52477eb7da58",
                      "name":  "Iterate over email attachments",
                      "type":  "n8n-nodes-base.code",
                      "position":  [
                                       320,
                                       32
                                   ],
                      "typeVersion":  1
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "caseSensitive":  false,
                                                                            "leftValue":  "",
                                                                            "typeValidation":  "strict",
                                                                            "version":  2
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "44c7b8fb-54b7-4208-a0ea-af174d2afd5c",
                                                                                   "leftValue":  "={{$json.fileName}}",
                                                                                   "rightValue":  "empresa",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "contains"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "and"
                                                        },
                                         "options":  {
                                                         "ignoreCase":  true
                                                     }
                                     },
                      "type":  "n8n-nodes-base.filter",
                      "typeVersion":  2.2,
                      "position":  [
                                       544,
                                       32
                                   ],
                      "id":  "971a0d30-97aa-4664-b581-e25e3aebb4d0",
                      "name":  "Filtrar por nombre"
                  },
                  {
                      "parameters":  {
                                         "pollTimes":  {
                                                           "item":  [
                                                                        {
                                                                            "mode":  "everyHour"
                                                                        }
                                                                    ]
                                                       },
                                         "filters":  {
                                                         "q":  "has:attachment"
                                                     }
                                     },
                      "type":  "n8n-nodes-base.gmailTrigger",
                      "typeVersion":  1.2,
                      "position":  [
                                       -128,
                                       32
                                   ],
                      "id":  "1d44d3bf-7d03-481f-9f73-c955f11c425d",
                      "name":  "Gmail Trigger1",
                      "credentials":  {
                                          "gmailOAuth2":  {
                                                              "id":  "zFi2O2ftsD72oE41",
                                                              "name":  "Gmail account"
                                                          }
                                      }
                  },
                  {
                      "parameters":  {
                                         "tableName":  "empresa",
                                         "onConflictColumns":  "cif"
                                     },
                      "type":  "n8n-nodes-supabaseupsert.supabaseUpsert",
                      "typeVersion":  1,
                      "position":  [
                                       1008,
                                       16
                                   ],
                      "id":  "53637c7e-b8f4-4a5b-949b-a64906bbe311",
                      "name":  "Upsert CSV data into table",
                      "credentials":  {
                                          "supabaseApi":  {
                                                              "id":  "8phlO4XYEkQd1GMS",
                                                              "name":  "Supabase account"
                                                          }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "string":  [
                                                                           {
                                                                               "value1":  "={{ $binary.data.fileExtension }}",
                                                                               "value2":  "csv"
                                                                           }
                                                                       ]
                                                        }
                                     },
                      "id":  "f43d7230-f7f6-481f-949b-339f32e66985",
                      "name":  "Is attachment a CSV?",
                      "type":  "n8n-nodes-base.if",
                      "position":  [
                                       768,
                                       32
                                   ],
                      "typeVersion":  1
                  }
              ],
    "connections":  {
                        "Get a message":  {
                                              "main":  [
                                                           [
                                                               {
                                                                   "node":  "Iterate over email attachments",
                                                                   "type":  "main",
                                                                   "index":  0
                                                               }
                                                           ]
                                                       ]
                                          },
                        "Iterate over email attachments":  {
                                                               "main":  [
                                                                            [
                                                                                {
                                                                                    "node":  "Filtrar por nombre",
                                                                                    "type":  "main",
                                                                                    "index":  0
                                                                                }
                                                                            ]
                                                                        ]
                                                           },
                        "Filtrar por nombre":  {
                                                   "main":  [
                                                                [
                                                                    {
                                                                        "node":  "Is attachment a CSV?",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    }
                                                                ]
                                                            ]
                                               },
                        "Gmail Trigger1":  {
                                               "main":  [
                                                            [
                                                                {
                                                                    "node":  "Get a message",
                                                                    "type":  "main",
                                                                    "index":  0
                                                                }
                                                            ]
                                                        ]
                                           },
                        "Is attachment a CSV?":  {
                                                     "main":  [
                                                                  [
                                                                      {
                                                                          "node":  "Upsert CSV data into table",
                                                                          "type":  "main",
                                                                          "index":  0
                                                                      }
                                                                  ]
                                                              ]
                                                 },
                        "Upsert CSV data into table":  {
                                                           "main":  [
                                                                        [

                                                                        ]
                                                                    ]
                                                       }
                    },
    "settings":  {
                     "executionOrder":  "v1"
                 },
    "staticData":  null,
    "meta":  {
                 "templateCredsSetupCompleted":  true
             },
    "pinData":  {

                },
    "versionId":  "d0dd7287-08cc-47d4-b58f-3c78b61074dd",
    "triggerCount":  0,
    "tags":  [

             ]
}
